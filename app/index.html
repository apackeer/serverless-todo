<!DOCTYPE html>

<html>

<head>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-MfvZlkHCEqatNoGiOXveE8FIwMzZg4W85qfrfIFBfYc= sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.12.min.js"></script>

    <script type="text/javascript" src="generated-js-sdk/lib/axios/dist/axios.standalone.js"></script>
    <script type="text/javascript" src="generated-js-sdk/lib/CryptoJS/rollups/hmac-sha256.js"></script>
    <script type="text/javascript" src="generated-js-sdk/lib/CryptoJS/rollups/sha256.js"></script>
    <script type="text/javascript" src="generated-js-sdk/lib/CryptoJS/components/hmac.js"></script>
    <script type="text/javascript" src="generated-js-sdk/lib/CryptoJS/components/enc-base64.js"></script>
    <script type="text/javascript" src="generated-js-sdk/lib/moment/moment.js"></script>
    <script type="text/javascript" src="generated-js-sdk/lib/url-template/url-template.js"></script>
    <script type="text/javascript" src="generated-js-sdk/lib/apiGatewayCore/sigV4Client.js"></script>
    <script type="text/javascript" src="generated-js-sdk/lib/apiGatewayCore/apiGatewayClient.js"></script>
    <script type="text/javascript" src="generated-js-sdk/lib/apiGatewayCore/simpleHttpClient.js"></script>
    <script type="text/javascript" src="generated-js-sdk/lib/apiGatewayCore/utils.js"></script>

    <script type="text/javascript" src="generated-js-sdk/apigClient.js"></script>
</head>

<body style="padding:10px;">
</body>
 <h1>Cognito Test</h1>
 <div class="main">
    <h2>Response 1</h2>
 	<pre id="response1">
 		<img src="http://orig12.deviantart.net/831e/f/2011/299/d/9/simple_loading_wheel_by_candirokz1-d4e1shx.gif" 		width="100" height="100"/>
 	</pre>

    <h2>Response 2</h2>
    <pre id="response2">
        <img src="http://orig12.deviantart.net/831e/f/2011/299/d/9/simple_loading_wheel_by_candirokz1-d4e1shx.gif"      width="100" height="100"/>
    </pre>
 </div>
<body>

<script type="text/javascript">

	AWS.config.region = 'us-east-1'; // Region
	AWS.config.credentials = new AWS.CognitoIdentityCredentials({
    	IdentityPoolId: 'us-east-1:0582cc22-fe47-494e-b0b3-e5d2ca82e3ad',
    	RoleArn: 'arn:aws:iam::975344022805:role/Cognito_aws_recipes_unauth_poolUnauth_Role'
	});

	AWS.config.credentials.get(function(){

		var identityId = AWS.config.credentials.identityId;
    	var accessKeyId = AWS.config.credentials.accessKeyId;
    	var secretAccessKey = AWS.config.credentials.secretAccessKey;
    	var sessionToken = AWS.config.credentials.sessionToken;

		console.log("cognito identity id: " + identityId);
		console.log("cognito access key: " + accessKeyId);
		console.log("cognito secret key: " + secretAccessKey);
		console.log("cognito session token: " + sessionToken);

		var apigClient = apigClientFactory.newClient({
    		 accessKey: accessKeyId,
    		 secretKey: secretAccessKey,
    		 sessionToken: sessionToken,
    		region: 'us-east-1'
		});

		var params = {};//{"search" : "foo"};
		var body = {};
		var additionalParams = {};

        apigClient.recipesGet(params, body, additionalParams)
            .then(function(result){
                console.log(result);

                $('#response1').html(JSON.stringify(result.data, null, 2));

            }).catch( function(result){
                console.log(result);
            });

	});

</script>